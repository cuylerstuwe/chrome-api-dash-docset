<!DOCTYPE html>
<html><head>
<link href="assets/site.css" rel="stylesheet" type="text/css">
<meta charset="utf-8" />
</head><body><div>
<main id="gc-pagecontent" role="main">
<main id="gc-pagecontent" role="main">


<article>
  <div itemprop="articleBody" class="api">
    <h1>chrome.gcm</h1>
    <table class="intro" id="intro">
      <tbody><tr>
        <td class="title">Description:</td>
        <td>
            Use <code>chrome.gcm</code> to enable apps and extensions to send and receive messages through the <a href="http://developer.android.com/google/gcm/">Google Cloud Messaging Service</a>.
                    <br>
        </td>
      </tr>
      <tr>
        <td class="title">Availability:</td>
        <td>
            Since Chrome 38.
            <br>
        </td>
      </tr>
      <tr>
        <td class="title">Permissions:</td>
        <td>
            <span class="code">
            &quot;gcm&quot;
                    </span>
            <br>
        </td>
      </tr>
      <tr>
        <td class="title">Learn More:</td>
        <td>
            <a href="https://developers.google.com/cloud-messaging/chrome/client">
            Implementing GCM Client on Chrome
                    </a>
            <br>
        </td>
      </tr>
    </tbody></table>
    <section id="toc">
    <h2>Summary</h2>
    <table class="api-summary">
      <tbody><tr>
        </tr><tr><th colspan="2">Properties</th></tr>
          <tr><td><a href="#property-MAX_MESSAGE_SIZE">MAX_MESSAGE_SIZE</a></td>
        </tr><tr><th colspan="2">Methods</th></tr>
        <tr><td><a href="#method-register">register</a> &#x2212;
            <code class="prettyprint">
            chrome.gcm.register(<span>array of string senderIds</span>, <span>function callback</span>)
            </code>
          </td></tr>
        <tr><td><a href="#method-unregister">unregister</a> &#x2212;
            <code class="prettyprint">
            chrome.gcm.unregister(<span>function callback</span>)
            </code>
          </td></tr>
        <tr><td><a href="#method-send">send</a> &#x2212;
            <code class="prettyprint">
            chrome.gcm.send(<span>object message</span>, <span>function callback</span>)
            </code>
          </td></tr>
        <tr><th colspan="2">Events</th></tr>
          <tr><td><a href="#event-onMessage">onMessage</a></td></tr>
          <tr><td><a href="#event-onMessagesDeleted">onMessagesDeleted</a></td></tr>
          <tr><td><a href="#event-onSendError">onSendError</a></td></tr>
    </tbody></table>
    </section>
    <section>
      <div class="api-reference">
          <h2 id="properties">Properties</h2>
          <table>
            <tbody><tr>
              <td><span class="type_name">  <code>4,096</code></span></td>
              <td><code id="property-MAX_MESSAGE_SIZE">chrome.gcm.MAX_MESSAGE_SIZE</code></td>
              <td>
                  The maximum size (in bytes) of all key/value pairs in a message.
              </td>
            </tr>
          </tbody></table>
          <h2 id="methods">Methods</h2>
            <div>
              <h3 id="method-register">register
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.gcm.register(<span>array of string senderIds</span>, <span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p>
                  Registers the application with GCM. The registration ID will be returned by the <code>callback</code>. If <code>register</code> is called again with the same list of <code>senderIds</code>, the same registration ID will be returned.
                </p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-register-senderIds">
                      <td>array of string</td>
                      <td>
                          senderIds</td>
                      <td>
                      
                      <p>
                        A list of server IDs that are allowed to send messages to the application. It should contain at least one and no more than 100 sender IDs.
                      </p></td>
                    </tr>
                    <tr id="property-register-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        Function called when registration completes. It should check <a href="runtime.html#property-lastError">runtime.lastError</a> for error when <code>registrationId</code> is empty.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function(string registrationId) <span class="subdued">{...}</span>;</code>
                          <table class="innerTable">
                            <tbody><tr id="property-callback-registrationId">
                              <td>string</td>
                              <td>
                                  registrationId</td>
                              <td>
                              
                              <p>
                                A registration ID assigned to the application by the GCM.
                              </p></td>
                            </tr>
                          </tbody></table>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
            <div>
              <h3 id="method-unregister">unregister
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.gcm.unregister(<span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p>
                  Unregisters the application from GCM.
                </p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-unregister-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        A function called after the unregistration completes. Unregistration was successful if <a href="runtime.html#property-lastError">runtime.lastError</a> is not set.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function() <span class="subdued">{...}</span>;</code>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
            <div>
              <h3 id="method-send">send
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.gcm.send(<span>object message</span>, <span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p>
                  Sends a message according to its contents.
                </p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-send-message">
                      <td>object</td>
                      <td>
                          message</td>
                      <td>
                      
                      <p>
                        A message to send to the other party via GCM.
                      </p>  <table class="innerTable">
                          <tbody><tr id="property-message-destinationId">
                            <td>string</td>
                            <td>
                                destinationId</td>
                            <td>
                            
                            <p>
                              The ID of the server to send the message to as assigned by <a href="https://code.google.com/apis/console">Google API Console</a>.
                            </p></td>
                          </tr><tr id="property-message-messageId">
                            <td>string</td>
                            <td>
                                messageId</td>
                            <td>
                            
                            <p>
                              The ID of the message. It must be unique for each message in scope of the applications. See the <a href="https://developer.chrome.com/extensions/cloudMessaging#send_messages">Cloud Messaging documentation</a> for advice for picking and handling an ID.
                            </p></td>
                          </tr><tr id="property-message-timeToLive">
                            <td>integer</td>
                            <td><span class="optional">(optional)</span>
                                timeToLive</td>
                            <td>
                            
                            <p>
                              Time-to-live of the message in seconds. If it is not possible to send the message within that time, an onSendError event will be raised. A time-to-live of 0 indicates that the message should be sent immediately or fail if it&apos;s not possible. The maximum and a default value of time-to-live is 86400 seconds (1 day).
                            </p></td>
                          </tr><tr id="property-message-data">
                            <td>object</td>
                            <td>
                                data</td>
                            <td>
                            
                            <p>
                              Message data to send to the server. Case-insensitive <code>goog.</code> and <code>google</code>, as well as case-sensitive <code>collapse_key</code> are disallowed as key prefixes. Sum of all key/value pairs should not exceed <a href="#property-MAX_MESSAGE_SIZE">gcm.MAX_MESSAGE_SIZE</a>.
                            </p></td>
                          </tr>
                        </tbody></table>
                      </td>
                    </tr>
                    <tr id="property-send-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        A function called after the message is successfully queued for sending. <a href="runtime.html#property-lastError">runtime.lastError</a> should be checked, to ensure a message was sent without problems.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function(string messageId) <span class="subdued">{...}</span>;</code>
                          <table class="innerTable">
                            <tbody><tr id="property-callback-messageId">
                              <td>string</td>
                              <td>
                                  messageId</td>
                              <td>
                              
                              <p>
                                The ID of the message that the callback was issued for.
                              </p></td>
                            </tr>
                          </tbody></table>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
          <h2 id="events">Events</h2>
            <div>
              <h3 id="event-onMessage">onMessage</h3>
              <div class="description">
            <p>
                  Fired when a message is received through GCM.
                </p>      
                  <div>
                    <h4 title>addListener
                    </h4>
                    <div class="summary">
                    <code class="prettyprint">
                    chrome.gcm.onMessage.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tbody><tr><th colspan="3">Parameters</th></tr>
                          <tr id="property-onMessage-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    The <em>callback</em> parameter should be a function
                                    that looks like this:
                                </p>
                              <code class="prettyprint">function(object message) <span class="subdued">{...}</span>;</code>
                                <table class="innerTable">
                                  <tbody><tr id="property-onMessage-message">
                                    <td>object</td>
                                    <td>
                                        message</td>
                                    <td>
                                    
                                    <p>
                                      A message received from another party via GCM.
                                    </p>  <table class="innerTable">
                                        <tbody><tr id="property-message-data">
                                          <td>object</td>
                                          <td>
                                              data</td>
                                          <td>
                                          
                                          <p>
                                            The message data.
                                          </p></td>
                                        </tr><tr id="property-message-from">
                                          <td>string</td>
                                          <td><span class="optional">(optional)</span>
                                              from</td>
                                          <td>
                                          <p class="availability">
                                            Since Chrome 41.
                                          </p>
                                          
                                          <p>
                                            The sender who issued the message.
                                          </p></td>
                                        </tr><tr id="property-message-collapseKey">
                                          <td>string</td>
                                          <td><span class="optional">(optional)</span>
                                              collapseKey</td>
                                          <td>
                                          
                                          <p>
                                            The collapse key of a message. See <a href="https://developer.chrome.com/extensions/cloudMessaging#collapsible_messages">Collapsible Messages</a> section of Cloud Messaging documentation for details.
                                          </p></td>
                                        </tr>
                                      </tbody></table>
                                    </td>
                                  </tr>
                                </tbody></table>
                            </td>
                          </tr>
                      </tbody></table>
                    </div>
                  </div>
                  
              </div>
            </div>
            <div>
              <h3 id="event-onMessagesDeleted">onMessagesDeleted</h3>
              <div class="description">
            <p>
                  Fired when a GCM server had to delete messages sent by an app server to the application. See <a href="https://developer.chrome.com/extensions/cloudMessaging#messages_deleted_event">Messages deleted event</a> section of Cloud Messaging documentation for details on handling this event.
                </p>      
                  <div>
                    <h4 title>addListener
                    </h4>
                    <div class="summary">
                    <code class="prettyprint">
                    chrome.gcm.onMessagesDeleted.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tbody><tr><th colspan="3">Parameters</th></tr>
                          <tr id="property-onMessagesDeleted-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    The <em>callback</em> parameter should be a function
                                    that looks like this:
                                </p>
                              <code class="prettyprint">function() <span class="subdued">{...}</span>;</code>
                            </td>
                          </tr>
                      </tbody></table>
                    </div>
                  </div>
                  
              </div>
            </div>
            <div>
              <h3 id="event-onSendError">onSendError</h3>
              <div class="description">
            <p>
                  Fired when it was not possible to send a message to the GCM server.
                </p>      
                  <div>
                    <h4 title>addListener
                    </h4>
                    <div class="summary">
                    <code class="prettyprint">
                    chrome.gcm.onSendError.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tbody><tr><th colspan="3">Parameters</th></tr>
                          <tr id="property-onSendError-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    The <em>callback</em> parameter should be a function
                                    that looks like this:
                                </p>
                              <code class="prettyprint">function(object error) <span class="subdued">{...}</span>;</code>
                                <table class="innerTable">
                                  <tbody><tr id="property-onSendError-error">
                                    <td>object</td>
                                    <td>
                                        error</td>
                                    <td>
                                    
                                    <p>
                                      An error that occured while trying to send the message either in Chrome or on the GCM server. Application can retry sending the message with a reasonable backoff and possibly longer time-to-live.
                                    </p>  <table class="innerTable">
                                        <tbody><tr id="property-error-errorMessage">
                                          <td>string</td>
                                          <td>
                                              errorMessage</td>
                                          <td>
                                          
                                          <p>
                                            The error message describing the problem.
                                          </p></td>
                                        </tr><tr id="property-error-messageId">
                                          <td>string</td>
                                          <td><span class="optional">(optional)</span>
                                              messageId</td>
                                          <td>
                                          
                                          <p>
                                            The ID of the message with this error, if error is related to a specific message.
                                          </p></td>
                                        </tr><tr id="property-error-details">
                                          <td>object</td>
                                          <td>
                                              details</td>
                                          <td>
                                          
                                          <p>
                                            Additional details related to the error, when available.
                                          </p></td>
                                        </tr>
                                      </tbody></table>
                                    </td>
                                  </tr>
                                </tbody></table>
                            </td>
                          </tr>
                      </tbody></table>
                    </div>
                  </div>
                  
              </div>
            </div>
      </div>
    </section>
  </div>
</article>
    </main>
</main></div></body></html>
<!DOCTYPE html>
<html><head>
<link href="assets/site.css" rel="stylesheet" type="text/css">
<meta charset="utf-8" />
</head><body><div>
<main id="gc-pagecontent" role="main">
<main id="gc-pagecontent" role="main">


<article>
  <div itemprop="articleBody" class="api">
    <h1>chrome.tabCapture</h1>
    <table class="intro" id="intro">
      <tbody><tr>
        <td class="title">Description:</td>
        <td>
             Use the <code>chrome.tabCapture</code> API to interact with tab media
             streams.
                    <br>
        </td>
      </tr>
      <tr>
        <td class="title">Availability:</td>
        <td>
            Since Chrome 38.
            <br>
        </td>
      </tr>
      <tr>
        <td class="title">Permissions:</td>
        <td>
            <span class="code">
            &quot;tabCapture&quot;
                    </span>
            <br>
        </td>
      </tr>
    </tbody></table>
    <section id="toc">
    <h2>Summary</h2>
    <table class="api-summary">
      <tbody><tr>
        </tr><tr><th colspan="2">Types</th></tr>
          <tr><td><a href="#type-CaptureInfo">CaptureInfo</a></td></tr>
          <tr><td><a href="#type-MediaStreamConstraint">MediaStreamConstraint</a></td></tr>
          <tr><td><a href="#type-CaptureOptions">CaptureOptions</a></td></tr>
        <tr><th colspan="2">Methods</th></tr>
        <tr><td><a href="#method-capture">capture</a> &#x2212;
            <code class="prettyprint">
            chrome.tabCapture.capture(<span>    CaptureOptions options</span>, <span>function callback</span>)
            </code>
          </td></tr>
        <tr><td><a href="#method-getCapturedTabs">getCapturedTabs</a> &#x2212;
            <code class="prettyprint">
            chrome.tabCapture.getCapturedTabs(<span>function callback</span>)
            </code>
          </td></tr>
        <tr><td><a href="#method-captureOffscreenTab">captureOffscreenTab</a> &#x2212;
            <code class="prettyprint">
            chrome.tabCapture.captureOffscreenTab(<span>string startUrl</span>, <span>    CaptureOptions options</span>, <span>function callback</span>)
            </code>
          </td></tr>
        <tr><td><a href="#method-getMediaStreamId">getMediaStreamId</a> &#x2212;
            <code class="prettyprint">
            chrome.tabCapture.getMediaStreamId(<span class="optional">object options</span>, <span>function callback</span>)
            </code>
          </td></tr>
        <tr><th colspan="2">Events</th></tr>
          <tr><td><a href="#event-onStatusChanged">onStatusChanged</a></td></tr>
    </tbody></table>
    </section>
    <section>
      <div class="api-reference">
          <h2 id="types">Types</h2>
            <div>
              <h3 id="type-CaptureInfo">CaptureInfo</h3>
              <table>
                  <tbody><tr><th colspan="3" id="CaptureInfo-properties">properties</th></tr>
                  <tr id="property-CaptureInfo-tabId">
                    <td>integer</td>
                    <td>
                        tabId</td>
                    <td>
                    
                    <p>
                      The id of the tab whose status changed.
                    </p></td>
                  </tr><tr id="property-CaptureInfo-status">
                    <td>enum of    <code>&quot;pending&quot;</code>,    <code>&quot;active&quot;</code>,    <code>&quot;stopped&quot;</code>,    or <code>&quot;error&quot;</code></td>
                    <td>
                        status</td>
                    <td>
                    
                    <p>
                      The new capture status of the tab.
                    </p></td>
                  </tr><tr id="property-CaptureInfo-fullscreen">
                    <td>boolean</td>
                    <td>
                        fullscreen</td>
                    <td>
                    
                    <p>
                      Whether an element in the tab being captured is in fullscreen mode.
                    </p></td>
                  </tr>
              </tbody></table>
            </div>
            <div>
              <h3 id="type-MediaStreamConstraint">MediaStreamConstraint</h3>
              <table>
                  <tbody><tr><th colspan="3" id="MediaStreamConstraint-properties">properties</th></tr>
                  <tr id="property-MediaStreamConstraint-mandatory">
                    <td>object</td>
                    <td>
                        mandatory</td>
                    <td>
                    
                    </td>
                  </tr><tr id="property-MediaStreamConstraint-optional">
                    <td>object</td>
                    <td><span class="optional">(optional)</span>
                        optional</td>
                    <td>
                    
                    </td>
                  </tr>
              </tbody></table>
            </div>
            <div>
              <h3 id="type-CaptureOptions">CaptureOptions</h3>
              <table>
                  <tbody><tr><th colspan="3" id="CaptureOptions-properties">properties</th></tr>
                  <tr id="property-CaptureOptions-audio">
                    <td>boolean</td>
                    <td><span class="optional">(optional)</span>
                        audio</td>
                    <td>
                    
                    </td>
                  </tr><tr id="property-CaptureOptions-video">
                    <td>boolean</td>
                    <td><span class="optional">(optional)</span>
                        video</td>
                    <td>
                    
                    </td>
                  </tr><tr id="property-CaptureOptions-audioConstraints">
                    <td>    <a href="#type-MediaStreamConstraint">MediaStreamConstraint</a></td>
                    <td><span class="optional">(optional)</span>
                        audioConstraints</td>
                    <td>
                    
                    </td>
                  </tr><tr id="property-CaptureOptions-videoConstraints">
                    <td>    <a href="#type-MediaStreamConstraint">MediaStreamConstraint</a></td>
                    <td><span class="optional">(optional)</span>
                        videoConstraints</td>
                    <td>
                    
                    </td>
                  </tr>
              </tbody></table>
            </div>
          <h2 id="methods">Methods</h2>
            <div>
              <h3 id="method-capture">capture
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.tabCapture.capture(<span>    <a href="#type-CaptureOptions">CaptureOptions</a> options</span>, <span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p>
                  Captures the visible area of the currently active tab.  Capture can only be started on the currently active tab after the extension has been <em>invoked</em>, similar to the way that <a href="https://developer.chrome.com/extensions/activeTab#invoking-activeTab">activeTab</a> works.  Capture is maintained across page navigations within the tab, and stops when the tab is closed, or the media stream is closed by the extension.
                </p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-capture-options">
                      <td>    <a href="#type-CaptureOptions">CaptureOptions</a></td>
                      <td>
                          options</td>
                      <td>
                      
                      <p>
                        Configures the returned media stream.
                      </p></td>
                    </tr>
                    <tr id="property-capture-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        Callback with either the tab capture MediaStream or   <code>null</code>.  <code>null</code> indicates an error has occurred   and the client may query <a href="runtime.html#property-lastError">runtime.lastError</a> to access the error   details.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function(LocalMediaStream stream) <span class="subdued">{...}</span>;</code>
                          <table class="innerTable">
                            <tbody><tr id="property-callback-stream">
                              <td>LocalMediaStream</td>
                              <td>
                                  stream</td>
                              <td>
                              
                              </td>
                            </tr>
                          </tbody></table>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
            <div>
              <h3 id="method-getCapturedTabs">getCapturedTabs
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.tabCapture.getCapturedTabs(<span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p>
                  Returns a list of tabs that have requested capture or are being captured, i.e. status != stopped and status != error. This allows extensions to inform the user that there is an existing tab capture that would prevent a new tab capture from succeeding (or to prevent redundant requests for the same tab).
                </p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-getCapturedTabs-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        Callback invoked with CaptureInfo[] for captured tabs.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function(array of     <a href="#type-CaptureInfo">CaptureInfo</a> result) <span class="subdued">{...}</span>;</code>
                          <table class="innerTable">
                            <tbody><tr id="property-callback-result">
                              <td>array of     <a href="#type-CaptureInfo">CaptureInfo</a></td>
                              <td>
                                  result</td>
                              <td>
                              
                              </td>
                            </tr>
                          </tbody></table>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
            <div>
              <h3 id="method-captureOffscreenTab">captureOffscreenTab
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.tabCapture.captureOffscreenTab(<span>string startUrl</span>, <span>    <a href="#type-CaptureOptions">CaptureOptions</a> options</span>, <span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p class="availability">
                  Since Chrome 47.
                </p>
                <p>
                  </p><p>Creates an off-screen tab and navigates it to the given |startUrl|. Then, capture is started and a MediaStream is returned via |callback|.</p><p>Off-screen tabs are isolated from the user&apos;s normal browser experience. They do not show up in the browser window or tab strip, nor are they visible to extensions (e.g., via the chrome.tabs.* APIs).</p><p>An off-screen tab remains alive until one of three events occurs: 1. All MediaStreams providing its captured content are closed; 2. the page self-closes (e.g., via window.close()); 3. the extension that called captureOffscreenTab() is unloaded.</p><p>Sandboxing: The off-screen tab does not have any access whatsoever to the local user profile (including cookies, HTTP auth, etc.).  Instead, it is provided its own sandboxed profile.  Also, it cannot access any interactive resources such as keyboard/mouse input, media recording devices (e.g., web cams), copy/paste to/from the system clipboard, etc.</p><p>Note: This is a new API, currently only available in Canary/Dev channel, and may change without notice.</p>
                <p></p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-captureOffscreenTab-startUrl">
                      <td>string</td>
                      <td>
                          startUrl</td>
                      <td>
                      
                      </td>
                    </tr>
                    <tr id="property-captureOffscreenTab-options">
                      <td>    <a href="#type-CaptureOptions">CaptureOptions</a></td>
                      <td>
                          options</td>
                      <td>
                      
                      <p>
                        Constraints for the capture and returned MediaStream.
                      </p></td>
                    </tr>
                    <tr id="property-captureOffscreenTab-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        Callback with either the tab capture MediaStream or   <code>null</code>.  <code>null</code> indicates an error has occurred   and the client may query <a href="runtime.html#property-lastError">runtime.lastError</a> to access the error   details.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function(LocalMediaStream stream) <span class="subdued">{...}</span>;</code>
                          <table class="innerTable">
                            <tbody><tr id="property-callback-stream">
                              <td>LocalMediaStream</td>
                              <td>
                                  stream</td>
                              <td>
                              
                              </td>
                            </tr>
                          </tbody></table>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
            <div>
              <h3 id="method-getMediaStreamId">getMediaStreamId
              </h3>
              <div class="summary">
              <code class="prettyprint">
              chrome.tabCapture.getMediaStreamId(<span class="optional">object options</span>, <span>function callback</span>)
              </code>
              </div>
              <div class="description">
                <p class="availability">
                  Since Chrome 71.
                </p>
                <p>
                  Creates a stream ID to capture the target tab. Similar to chrome.tabCapture.capture() method, but returns a media stream ID, instead of a media stream, to the consumer tab.
                </p>
                <table>
                  <tbody><tr><th colspan="3">Parameters</th></tr>
                    <tr id="property-getMediaStreamId-options">
                      <td>object</td>
                      <td><span class="optional">(optional)</span>
                          options</td>
                      <td>
                      
                        <table class="innerTable">
                          <tbody><tr id="property-options-consumerTabId">
                            <td>integer</td>
                            <td><span class="optional">(optional)</span>
                                consumerTabId</td>
                            <td>
                            
                            <p>
                              Optional tab id of the tab which will later invoke <code>getUserMedia()</code> to consume the stream. If not specified then the resulting stream can be used only by the calling extension. The stream can only be used by frames in the given tab whose security origin matches the consumber tab&apos;s origin. The tab&apos;s origin must be a secure origin, e.g. HTTPS.
                            </p></td>
                          </tr><tr id="property-options-targetTabId">
                            <td>integer</td>
                            <td><span class="optional">(optional)</span>
                                targetTabId</td>
                            <td>
                            
                            <p>
                              Optional tab id of the tab which will be captured. If not specified then the current active tab will be selected. Only tabs for which the extension has been granted the <code>activeTab</code> permission can be used as the target tab.
                            </p></td>
                          </tr>
                        </tbody></table>
                      </td>
                    </tr>
                    <tr id="property-getMediaStreamId-callback">
                      <td>function</td>
                      <td>
                          callback</td>
                      <td>
                      
                      <p>
                        Callback to invoke with the result. If successful, the result is an opaque string that can be passed to the <code>getUserMedia()</code> API to generate a media stream that corresponds to the target tab. The created <code>streamId</code> can only be used once and expires after a few seconds if it is not used.
                      </p>    <p>
                              The <em>callback</em> parameter should be a function
                              that looks like this:
                          </p>
                        <code class="prettyprint">function(string streamId) <span class="subdued">{...}</span>;</code>
                          <table class="innerTable">
                            <tbody><tr id="property-callback-streamId">
                              <td>string</td>
                              <td>
                                  streamId</td>
                              <td>
                              
                              </td>
                            </tr>
                          </tbody></table>
                      </td>
                    </tr>
                </tbody></table>
              </div>
            </div>
          <h2 id="events">Events</h2>
            <div>
              <h3 id="event-onStatusChanged">onStatusChanged</h3>
              <div class="description">
            <p>
                  Event fired when the capture status of a tab changes. This allows extension authors to keep track of the capture status of tabs to keep UI elements like page actions in sync.
                </p>      
                  <div>
                    <h4 title>addListener
                    </h4>
                    <div class="summary">
                    <code class="prettyprint">
                    chrome.tabCapture.onStatusChanged.addListener(<span>function callback</span>)
                    </code>
                    </div>
                    <div class="description">
                      <table class="innerTable">
                        <tbody><tr><th colspan="3">Parameters</th></tr>
                          <tr id="property-onStatusChanged-callback">
                            <td>function</td>
                            <td>
                                callback</td>
                            <td>
                            
                                <p>
                                    The <em>callback</em> parameter should be a function
                                    that looks like this:
                                </p>
                              <code class="prettyprint">function(    <a href="#type-CaptureInfo">CaptureInfo</a> info) <span class="subdued">{...}</span>;</code>
                                <table class="innerTable">
                                  <tbody><tr id="property-onStatusChanged-info">
                                    <td>    <a href="#type-CaptureInfo">CaptureInfo</a></td>
                                    <td>
                                        info</td>
                                    <td>
                                    
                                    <p>
                                      CaptureInfo with new capture status for the tab.
                                    </p></td>
                                  </tr>
                                </tbody></table>
                            </td>
                          </tr>
                      </tbody></table>
                    </div>
                  </div>
                  
              </div>
            </div>
      </div>
    </section>
  </div>
</article>
    </main>
</main></div></body></html>